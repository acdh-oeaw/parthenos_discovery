#DEFINE input:inference 'parthenos_rules'
select distinct 
?type  (str(?type_label) as ?type_label)
?classE55
( GROUP_CONCAT(distinct ?class_label, "/") as ?class_label )

?instanceClass
( GROUP_CONCAT(distinct str(?instanceClass_labelX) , "/") as ?instanceClass_label )

(str(?ds) as ?ds) 
?gRecord
where{

values ?classE55 { <http://www.cidoc-crm.org/cidoc-crm/E55_Type> }
optional{
?classE55 rdfs:label ?class_label.
}

graph ?gRecord  {
?type a ?classE55.
optional{?type rdfs:label ?type_label.}
{?instanceURI crm:P2_has_type ?type} union {?type crm:P2i_is_type_of ?instanceURI}
optional{ ?instanceURI a ?instanceClass.}
}

?instanceClass rdfs:label ?instanceClass_labelX.

GRAPH <provenance> {
values ?ds { "PARTHENOS"^^<http://www.w3.org/2001/XMLSchema#string> }
?gRecord <dnetcollectedFrom> ?api . ?api <dnetisApiOf> ?ds}

} 
order by ?type ?ds