INFO:root:
################################
READING QUERY COLLECTION FILE: JRR_Quality_Test_Queries_V1.2.1_PerDatasource.py
################################

timestamp: 181018_092622
INFO:root:reading title
INFO:root:title: ['ARIADNE : JRR_Quality_Test_Queries_V1.2.1_PerDatasource']
INFO:root:reading description
INFO:root:description: ['Queries updated by Anastasia. Documented here: https://docs.google.com/document/d/1l4mzvSkWljwyj4wuOznk6OxXttDd0aYoQWPJRdcUTC8/edit?ts=5b9ba964']
INFO:root:reading output_destination
INFO:root:output_destination: ['https://drive.google.com/drive/folders/1GQPLj15BJ0xZ5cvc_u_bJUV8Um6N80DK']
INFO:root:reading output_format
INFO:root:Did not find valid output_format in query collection file, using csv instead
INFO:root:output_format: ['csv']
INFO:root:reading summary_sample_limit
INFO:root:summary_sample_limit: [10]
INFO:root:reading cooldown_between_queries
INFO:root:cooldown_between_queries: [10]
INFO:root:reading write_empty_results
INFO:root:write_empty_results: [True]
INFO:root:reading endpoints
INFO:root:endpoint: ['https://virtuoso.parthenos.d4science.org/sparql']
INFO:root:reading queries
INFO:root:query titles: ['1. class_population.V1.4']
INFO:root:query titles: ['This query gives the density of population of classes by instances for a particular named graph in the registry.']
INFO:root:query titles: ['#3 ######### Counts instances per class ignoring the record. To have the instances per class replace count(distinct ?instanceURI) with ?instanceURI in \'select\' clause #########\n#DEFINE input:inference \'parthenos_rules\'\nselect ?class (count(distinct ?instanceURI) as ?count)\n( STR(?class_label) as ?class_label)\n( STR(?ds) as ?ds)\nwhere{\ngraph ?gRecord  {\n?instanceURI a ?class.\n}\noptional{\n?class rdfs:label ?class_label.\nFILTER(langmatches(lang(?class_label), "en") || langmatches(lang(?class_label), ""))\n}\nvalues ?ds { \'ARIADNE\'^^<http://www.w3.org/2001/XMLSchema#string>}\nGRAPH <dnet:graph> {?gRecord <dnet:collectedFrom> ?api . ?api <dnet:isApiOf> ?ds}\n}\ngroup by ?ds ?class ?class_label\norder by ?ds ?class\n']
INFO:root:query titles: ['2. class_population_PE_top.V1.2']
INFO:root:query titles: ['This query gives the density of population of classes by instances grouped by Parthenos Top Level Entities (Projects, Services, Actors, Datasets and Software) for a particular named graph in the registry.']
INFO:root:query titles: ['#4 ######### The top categories and the count of instances per specific class #########\nselect distinct ?topclass\n( STR(?topclass_label) as ?topclass_label)\n#( GROUP_CONCAT(distinct ?topclass_label, "/") as ?topclass_label )\n(?class as ?specific_class) \n( STR(?class_label) as ?specific_class_label)\n#( GROUP_CONCAT(distinct ?class_labelX, "/") as ?specific_class_label )\n(count(distinct ?instanceURI) as ?count) \n( STR(?ds) as ?ds)\nwhere{\ngraph ?gRecord {\n?instanceURI a ?class.\n}\noptional { ?class rdfs:subClassOf*  ?topclass. }\nfilter(\n?topclass = crmpe:PE35_Project ||\n?topclass = crmpe:PE1_Service ||\n?topclass = crm:E39_Actor ||\n?topclass = crmpe:PE18_Dataset ||\n?topclass = crmdig:D14_Software\n)\noptional { ?class rdfs:label ?class_label . FILTER(langmatches(lang(?class_label), "en") || langmatches(lang(?class_label), "")) }\noptional { ?topclass rdfs:label ?topclass_label . FILTER(langmatches(lang(?topclass_label), "en") || langmatches(lang(?topclass_label), "")) }\nvalues ?ds { \'ARIADNE\'^^<http://www.w3.org/2001/XMLSchema#string>}\nGRAPH <dnet:graph> {?gRecord <dnet:collectedFrom> ?api . ?api <dnet:isApiOf> ?ds}\n}\ngroup by ?ds ?topclass ?class ?topclass_label ?class_label\norder by ?ds ?topclass ?class\n']
INFO:root:query titles: ['3. types_per_class_V1.3']
INFO:root:query titles: ['This query gives the list of instances of E55 existing in a data source and for what class they stand as type.']
INFO:root:query titles: ['#6 ############ Get Types related to Classes, per Datasource ###########\n#DEFINE input:inference \'parthenos_rules\'\nselect distinct\n?type  \n(STR(?type_label) as ?type_label)\n?class\n#( GROUP_CONCAT(distinct ?class_label, "/") as ?class_label )\n(STR(?class_label) as ?class_label)\n?instanceClass\n#( GROUP_CONCAT(distinct ?instanceClass_label , "/") as ?instanceClass_label )\n(STR(?instanceClass_label) as ?instanceClass_label)\n(STR(?ds) as ?ds) \nwhere{\ngraph ?gRecord  {\n?type a ?class.\noptional{?type rdfs:label ?type_label . \n    FILTER(langmatches(lang(?type_label), "en") || langmatches(lang(?type_label), ""))\n}\n{?instanceURI crm:P2_has_type ?type} union {?type crm:P2i_is_type_of ?instanceURI}\n}\nvalues ?classE55 { <http://www.cidoc-crm.org/cidoc-crm/E55_Type> }\n?class rdfs:subClassOf* ?classE55 .\noptional{?class rdfs:label ?class_label . \n    FILTER(langmatches(lang(?class_label), "en") || langmatches(lang(?class_label), ""))\n}\noptional{ ?instanceURI a ?instanceClass.\n    optional {?instanceClass rdfs:label ?instanceClass_label . \n        FILTER(langmatches(lang(?instanceClass_label), "en") || langmatches(lang(?instanceClass_label), ""))\n    }\n}\nvalues ?ds { \'ARIADNE\'^^<http://www.w3.org/2001/XMLSchema#string>}\nGRAPH <dnet:graph> {?gRecord <dnet:collectedFrom> ?api . ?api <dnet:isApiOf> ?ds}\n} \ngroup by ?ds ?class ?instanceClass ?type  ?class_label ?instanceClass_label ?type_label \norder by ?ds ?type\n']
INFO:root:query titles: ['4. types_per_class_count.V1.1']
INFO:root:query titles: ["A modification of query 'types_per_class_V1.3', where the types of the classes are counted."]
INFO:root:query titles: ['#6 ############ Get Types related to Classes, per Datasource ###########\n#Note: the class labels (i.e. ?class_label, ?instanceClass_label) could be replaced with the class names for better performance#\n#DEFINE input:inference \'parthenos_rules\'\nselect  \n?type  \n#(replace(str(?type),"(^.*/)",  "", "i" ) as ?type_label)\n(STR(?type_label) as ?type_label)\n?class\n#(replace(str(?class),"(^.*/)",  "", "i" ) as ?class_label)\n(STR(?class_label) as ?class_label)\n?instanceClass\n#(replace(str(?instanceClass),"(^.*/)",  "", "i" ) as ?instanceClass_label)\n(STR(?instanceClass_label) as ?instanceClass_label)\n(COUNT(distinct ?instanceURI) as ?instanceCount)\n(STR(?ds) as ?ds)\nwhere{\ngraph ?gRecord  {\n?type a ?class.\noptional {?type rdfs:label ?type_label .\n    FILTER ( langmatches(lang(?type_label), "en") || langmatches(lang(?type_label), "") ) \n}\n{?instanceURI crm:P2_has_type ?type} union {?type crm:P2i_is_type_of ?instanceURI}\n}\nvalues ?classE55 { <http://www.cidoc-crm.org/cidoc-crm/E55_Type> }\n?class rdfs:subClassOf* ?classE55 .\noptional{?class rdfs:label ?class_label . \n    FILTER(langmatches(lang(?class_label), "en") || langmatches(lang(?class_label), ""))\n}\noptional{ ?instanceURI a ?instanceClass.\n    optional {?instanceClass rdfs:label ?instanceClass_label . \n        FILTER(langmatches(lang(?instanceClass_label), "en") || langmatches(lang(?instanceClass_label), ""))\n    }\n}\nvalues ?ds { \'ARIADNE\'^^<http://www.w3.org/2001/XMLSchema#string> }\nGRAPH <dnet:graph> {?gRecord <dnet:collectedFrom> ?api . ?api <dnet:isApiOf> ?ds}\n} \ngroup by ?ds ?class ?instanceClass ?type ?class_label ?instanceClass_label ?type_label\n#group by ?ds ?class ?instanceClass ?type ?type_label\norder by ?ds ?type\n#---end of query ----\n']
INFO:root:query titles: ['5. all_types.V1.1']
INFO:root:query titles: ['This query returns all instances of type in a dataset given by a provider.']
INFO:root:query titles: ['#5 ############ Discovering the redundant values of all the Types ###########\n#DEFINE input:inference \'parthenos_rules\'\nselect distinct (?instanceURI as ?type)\n( STR(?label) as ?label)\n( STR(?ds) as ?ds)\nwhere{\nvalues ?classE55 { <http://www.cidoc-crm.org/cidoc-crm/E55_Type> }\ngraph ?gRecord  {\n?instanceURI a ?class.\noptional{\n?instanceURI rdfs:label ?label.\nFILTER(langmatches(lang(?label), "en") || langmatches(lang(?label), ""))\n}\n}\n?class rdfs:subClassOf* ?classE55.\nvalues ?ds {\'ARIADNE\'^^<http://www.w3.org/2001/XMLSchema#string>}\nGRAPH <dnet:graph> {?gRecord <dnet:collectedFrom> ?api . ?api <dnet:isApiOf> ?ds}\n} \norder by  ?instanceURI\n#---end of query ----\n']
INFO:root:query titles: ['6. place_instances_count.V1.1']
INFO:root:query titles: ['This query gives the list of instances of E53 class existing in a data source and the number of times it is used.']
INFO:root:query titles: ['#7b ############ Get the Places instances COUNT per Datasource ###########\nselect \n(?instanceURI as ?place)\n#( GROUP_CONCAT(distinct ?place_labelX, "/") as ?place_label)\n(STR(?place_label) as ?place_label)\n(COUNT(distinct ?resource) as ?placeAppearance)\n(STR(?ds) as ?ds) \nwhere{\nvalues ?classE53 { <http://www.cidoc-crm.org/cidoc-crm/E53_Place> }\n?class rdfs:subClassOf* ?classE53 .\ngraph ?gRecord {\n?instanceURI a ?class.\noptional{\n?instanceURI rdfs:label ?place_label. FILTER(langmatches(lang(?place_label), "en") || langmatches(lang(?place_label), ""))\n}\n?resource ?relatedto ?instanceURI.\n}\nvalues ?ds { \'ARIADNE\'^^<http://www.w3.org/2001/XMLSchema#string> }\nGRAPH <dnet:graph> {?gRecord <dnet:collectedFrom> ?api . ?api <dnet:isApiOf> ?ds}\n} group by ?ds ?instanceURI ?place_label\norder by ?ds\n#---end of query ----\n']
INFO:root:query titles: ['7. periods_and_events_count.V1.1']
INFO:root:query titles: ['This query gives the list of instances of E4 Period and E5 Event existing in a data source and their counts.']
INFO:root:query titles: ['#8a ############ Get the Periods/Events/Activities instances COUNT per Datasource ###########\n#DEFINE input:inference \'parthenos_rules\'\nselect \n(?instanceURI as ?instance)\n#( GROUP_CONCAT(distinct ?instance_label, "/") as ?instance_label)\n(STR(?instance_label) as ?instance_label)\n(COUNT(distinct ?resource) as ?instanceAppearance)\n(STR(?ds) as ?ds) \nwhere{\ngraph ?gRecord {\n?instanceURI a ?class.\noptional{\n?instanceURI rdfs:label ?instance_label.\nFILTER(langmatches(lang(?instance_label), "en") || langmatches(lang(?instance_label), ""))\n}\n?resource ?relatedto ?instanceURI.\n}\nfilter (?class = <http://www.cidoc-crm.org/cidoc-crm/E4_Period> || ?class = <http://www.cidoc-crm.org/cidoc-crm/E5_Event>)\n#optional{?class rdfs:label ?class_label. FILTER(langmatches(lang(?class_label), "en") || langmatches(lang(?class_label), ""))}\nvalues ?ds { \'ARIADNE\'^^<http://www.w3.org/2001/XMLSchema#string> }\nGRAPH <dnet:graph> {?gRecord <dnet:collectedFrom> ?api . ?api <dnet:isApiOf> ?ds}\n} \ngroup by ?ds ?class ?instanceURI ?instance_label\norder by ?ds ?class\n#---end of query ----\n']
INFO:root:
################################
Setting up output destination: https://drive.google.com/drive/folders/1GQPLj15BJ0xZ5cvc_u_bJUV8Um6N80DK
INFO:root:deduced output_destination_type: google_folder
WARNING:googleapiclient.discovery_cache:file_cache is unavailable when using oauth2client >= 4.0.0
Traceback (most recent call last):
  File "/usr/local/lib/python3.5/dist-packages/googleapiclient/discovery_cache/__init__.py", line 36, in autodetect
    from google.appengine.api import memcache
ImportError: No module named 'google'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.5/dist-packages/googleapiclient/discovery_cache/file_cache.py", line 33, in <module>
    from oauth2client.contrib.locked_file import LockedFile
ImportError: No module named 'oauth2client.contrib.locked_file'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.5/dist-packages/googleapiclient/discovery_cache/file_cache.py", line 37, in <module>
    from oauth2client.locked_file import LockedFile
ImportError: No module named 'oauth2client.locked_file'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.5/dist-packages/googleapiclient/discovery_cache/__init__.py", line 41, in autodetect
    from . import file_cache
  File "/usr/local/lib/python3.5/dist-packages/googleapiclient/discovery_cache/file_cache.py", line 41, in <module>
    'file_cache is unavailable when using oauth2client >= 4.0.0')
ImportError: file_cache is unavailable when using oauth2client >= 4.0.0
INFO:googleapiclient.discovery:URL being requested: GET https://www.googleapis.com/discovery/v1/apis/drive/v3/rest
WARNING:googleapiclient.discovery_cache:file_cache is unavailable when using oauth2client >= 4.0.0
Traceback (most recent call last):
  File "/usr/local/lib/python3.5/dist-packages/googleapiclient/discovery_cache/__init__.py", line 36, in autodetect
    from google.appengine.api import memcache
ImportError: No module named 'google'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.5/dist-packages/googleapiclient/discovery_cache/file_cache.py", line 33, in <module>
    from oauth2client.contrib.locked_file import LockedFile
ImportError: No module named 'oauth2client.contrib.locked_file'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.5/dist-packages/googleapiclient/discovery_cache/file_cache.py", line 37, in <module>
    from oauth2client.locked_file import LockedFile
ImportError: No module named 'oauth2client.locked_file'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.5/dist-packages/googleapiclient/discovery_cache/__init__.py", line 41, in autodetect
    from . import file_cache
  File "/usr/local/lib/python3.5/dist-packages/googleapiclient/discovery_cache/file_cache.py", line 41, in <module>
    'file_cache is unavailable when using oauth2client >= 4.0.0')
ImportError: file_cache is unavailable when using oauth2client >= 4.0.0
INFO:googleapiclient.discovery:URL being requested: GET https://www.googleapis.com/discovery/v1/apis/sheets/v4/rest
INFO:root:ID of google folder : 1GQPLj15BJ0xZ5cvc_u_bJUV8Um6N80DK
INFO:googleapiclient.discovery:URL being requested: POST https://www.googleapis.com/drive/v3/files?alt=json
INFO:oauth2client.transport:Refreshing due to a 401 (attempt 1/2)
INFO:oauth2client.client:Refreshing access_token
INFO:googleapiclient.discovery:URL being requested: POST https://sheets.googleapis.com/v4/spreadsheets/1wGmI6VF5nQiy_bPxeZCoqgWhKHd92sxf09Pbjnb-F2w:batchUpdate?alt=json
INFO:root:Created google sheets at: docs.google.com/spreadsheets/d/1wGmI6VF5nQiy_bPxeZCoqgWhKHd92sxf09Pbjnb-F2w
INFO:root:
################################
STARTING EXECUTION OF QUERIES: ARIADNE : JRR_Quality_Test_Queries_V1.2.1_PerDatasource
################################

INFO:root:Getting count of all triples in whole triplestore
INFO:root:count_triples_in_endpoint: 29770796

INFO:root:Writing header to summary in google sheets
INFO:googleapiclient.discovery:URL being requested: PUT https://sheets.googleapis.com/v4/spreadsheets/1wGmI6VF5nQiy_bPxeZCoqgWhKHd92sxf09Pbjnb-F2w/values/0.%20Summary%21A1%3AA6?valueInputOption=RAW&alt=json
INFO:root:
################################
EXECUTE: 1. class_population.V1.4
#3 ######### Counts instances per class ignoring the record. To have the instances per class replace count(distinct ?instanceURI) with ?instanceURI in 'select' clause #########
#DEFINE input:inference 'parthenos_rules'
select ?class (count(distinct ?instanceURI) as ?count)
( STR(?class_label) as ?class_label)
( STR(?ds) as ?ds)
where{
graph ?gRecord  {
?instanceURI a ?class.
}
optional{
?class rdfs:label ?class_label.
FILTER(langmatches(lang(?class_label), "en") || langmatches(lang(?class_label), ""))
}
values ?ds { 'ARIADNE'^^<http://www.w3.org/2001/XMLSchema#string>}
GRAPH <dnet:graph> {?gRecord <dnet:collectedFrom> ?api . ?api <dnet:isApiOf> ?ds}
}
group by ?ds ?class ?class_label
order by ?ds ?class

INFO:root:query_text: 
#3 ######### Counts instances per class ignoring the record. To have the instances per class replace count(distinct ?instanceURI) with ?instanceURI in 'select' clause #########
#DEFINE input:inference 'parthenos_rules'
select ?class (count(distinct ?instanceURI) as ?count)
( STR(?class_label) as ?class_label)
( STR(?ds) as ?ds)
where{
graph ?gRecord  {
?instanceURI a ?class.
}
optional{
?class rdfs:label ?class_label.
FILTER(langmatches(lang(?class_label), "en") || langmatches(lang(?class_label), ""))
}
values ?ds { 'ARIADNE'^^<http://www.w3.org/2001/XMLSchema#string>}
GRAPH <dnet:graph> {?gRecord <dnet:collectedFrom> ?api . ?api <dnet:isApiOf> ?ds}
}
group by ?ds ?class ?class_label
order by ?ds ?class

INFO:root:#### query_title: 1. class_population.V1.4

INFO:root:query_for_count: 
NONE

INFO:root:results_lines_count: -

INFO:root:results_execution_duration: 110.92702150344849

INFO:root:harmonizing results
INFO:root:Done with harmonizing results, duration: 0.0010223388671875
INFO:root:EXECUTION FINISHED
Elapsed time: 110.92702150344849
INFO:root:Writing to summary
INFO:googleapiclient.discovery:URL being requested: PUT https://sheets.googleapis.com/v4/spreadsheets/1wGmI6VF5nQiy_bPxeZCoqgWhKHd92sxf09Pbjnb-F2w/values/0.%20Summary%21A10%3AD27?valueInputOption=RAW&alt=json
INFO:root:Writing results to output_destination
INFO:googleapiclient.discovery:URL being requested: POST https://sheets.googleapis.com/v4/spreadsheets/1wGmI6VF5nQiy_bPxeZCoqgWhKHd92sxf09Pbjnb-F2w:batchUpdate?alt=json
INFO:googleapiclient.discovery:URL being requested: POST https://sheets.googleapis.com/v4/spreadsheets/1wGmI6VF5nQiy_bPxeZCoqgWhKHd92sxf09Pbjnb-F2w:batchUpdate?alt=json
INFO:googleapiclient.discovery:URL being requested: PUT https://sheets.googleapis.com/v4/spreadsheets/1wGmI6VF5nQiy_bPxeZCoqgWhKHd92sxf09Pbjnb-F2w/values/1.%20class_population.V1.4%21A1%3AD26?valueInputOption=RAW&alt=json
INFO:root:
################################
EXECUTE: 2. class_population_PE_top.V1.2
#4 ######### The top categories and the count of instances per specific class #########
select distinct ?topclass
( STR(?topclass_label) as ?topclass_label)
#( GROUP_CONCAT(distinct ?topclass_label, "/") as ?topclass_label )
(?class as ?specific_class) 
( STR(?class_label) as ?specific_class_label)
#( GROUP_CONCAT(distinct ?class_labelX, "/") as ?specific_class_label )
(count(distinct ?instanceURI) as ?count) 
( STR(?ds) as ?ds)
where{
graph ?gRecord {
?instanceURI a ?class.
}
optional { ?class rdfs:subClassOf*  ?topclass. }
filter(
?topclass = crmpe:PE35_Project ||
?topclass = crmpe:PE1_Service ||
?topclass = crm:E39_Actor ||
?topclass = crmpe:PE18_Dataset ||
?topclass = crmdig:D14_Software
)
optional { ?class rdfs:label ?class_label . FILTER(langmatches(lang(?class_label), "en") || langmatches(lang(?class_label), "")) }
optional { ?topclass rdfs:label ?topclass_label . FILTER(langmatches(lang(?topclass_label), "en") || langmatches(lang(?topclass_label), "")) }
values ?ds { 'ARIADNE'^^<http://www.w3.org/2001/XMLSchema#string>}
GRAPH <dnet:graph> {?gRecord <dnet:collectedFrom> ?api . ?api <dnet:isApiOf> ?ds}
}
group by ?ds ?topclass ?class ?topclass_label ?class_label
order by ?ds ?topclass ?class

INFO:root:query_text: 
#4 ######### The top categories and the count of instances per specific class #########
select distinct ?topclass
( STR(?topclass_label) as ?topclass_label)
#( GROUP_CONCAT(distinct ?topclass_label, "/") as ?topclass_label )
(?class as ?specific_class) 
( STR(?class_label) as ?specific_class_label)
#( GROUP_CONCAT(distinct ?class_labelX, "/") as ?specific_class_label )
(count(distinct ?instanceURI) as ?count) 
( STR(?ds) as ?ds)
where{
graph ?gRecord {
?instanceURI a ?class.
}
optional { ?class rdfs:subClassOf*  ?topclass. }
filter(
?topclass = crmpe:PE35_Project ||
?topclass = crmpe:PE1_Service ||
?topclass = crm:E39_Actor ||
?topclass = crmpe:PE18_Dataset ||
?topclass = crmdig:D14_Software
)
optional { ?class rdfs:label ?class_label . FILTER(langmatches(lang(?class_label), "en") || langmatches(lang(?class_label), "")) }
optional { ?topclass rdfs:label ?topclass_label . FILTER(langmatches(lang(?topclass_label), "en") || langmatches(lang(?topclass_label), "")) }
values ?ds { 'ARIADNE'^^<http://www.w3.org/2001/XMLSchema#string>}
GRAPH <dnet:graph> {?gRecord <dnet:collectedFrom> ?api . ?api <dnet:isApiOf> ?ds}
}
group by ?ds ?topclass ?class ?topclass_label ?class_label
order by ?ds ?topclass ?class

INFO:root:#### query_title: 2. class_population_PE_top.V1.2

INFO:root:query_for_count: 
NONE

INFO:root:results_lines_count: -

INFO:root:results_execution_duration: 274.9945147037506

INFO:root:harmonizing results
INFO:root:Done with harmonizing results, duration: 0.0003604888916015625
INFO:root:EXECUTION FINISHED
Elapsed time: 274.9945147037506
INFO:root:Writing to summary
INFO:googleapiclient.discovery:URL being requested: PUT https://sheets.googleapis.com/v4/spreadsheets/1wGmI6VF5nQiy_bPxeZCoqgWhKHd92sxf09Pbjnb-F2w/values/0.%20Summary%21A31%3AF43?valueInputOption=RAW&alt=json
INFO:root:Writing results to output_destination
INFO:googleapiclient.discovery:URL being requested: POST https://sheets.googleapis.com/v4/spreadsheets/1wGmI6VF5nQiy_bPxeZCoqgWhKHd92sxf09Pbjnb-F2w:batchUpdate?alt=json
INFO:googleapiclient.discovery:URL being requested: POST https://sheets.googleapis.com/v4/spreadsheets/1wGmI6VF5nQiy_bPxeZCoqgWhKHd92sxf09Pbjnb-F2w:batchUpdate?alt=json
INFO:googleapiclient.discovery:URL being requested: PUT https://sheets.googleapis.com/v4/spreadsheets/1wGmI6VF5nQiy_bPxeZCoqgWhKHd92sxf09Pbjnb-F2w/values/2.%20class_population_PE_top.V1.2%21A1%3AF6?valueInputOption=RAW&alt=json
INFO:root:
################################
EXECUTE: 3. types_per_class_V1.3
#6 ############ Get Types related to Classes, per Datasource ###########
#DEFINE input:inference 'parthenos_rules'
select distinct
?type  
(STR(?type_label) as ?type_label)
?class
#( GROUP_CONCAT(distinct ?class_label, "/") as ?class_label )
(STR(?class_label) as ?class_label)
?instanceClass
#( GROUP_CONCAT(distinct ?instanceClass_label , "/") as ?instanceClass_label )
(STR(?instanceClass_label) as ?instanceClass_label)
(STR(?ds) as ?ds) 
where{
graph ?gRecord  {
?type a ?class.
optional{?type rdfs:label ?type_label . 
    FILTER(langmatches(lang(?type_label), "en") || langmatches(lang(?type_label), ""))
}
{?instanceURI crm:P2_has_type ?type} union {?type crm:P2i_is_type_of ?instanceURI}
}
values ?classE55 { <http://www.cidoc-crm.org/cidoc-crm/E55_Type> }
?class rdfs:subClassOf* ?classE55 .
optional{?class rdfs:label ?class_label . 
    FILTER(langmatches(lang(?class_label), "en") || langmatches(lang(?class_label), ""))
}
optional{ ?instanceURI a ?instanceClass.
    optional {?instanceClass rdfs:label ?instanceClass_label . 
        FILTER(langmatches(lang(?instanceClass_label), "en") || langmatches(lang(?instanceClass_label), ""))
    }
}
values ?ds { 'ARIADNE'^^<http://www.w3.org/2001/XMLSchema#string>}
GRAPH <dnet:graph> {?gRecord <dnet:collectedFrom> ?api . ?api <dnet:isApiOf> ?ds}
} 
group by ?ds ?class ?instanceClass ?type  ?class_label ?instanceClass_label ?type_label 
order by ?ds ?type

INFO:root:query_text: 
#6 ############ Get Types related to Classes, per Datasource ###########
#DEFINE input:inference 'parthenos_rules'
select distinct
?type  
(STR(?type_label) as ?type_label)
?class
#( GROUP_CONCAT(distinct ?class_label, "/") as ?class_label )
(STR(?class_label) as ?class_label)
?instanceClass
#( GROUP_CONCAT(distinct ?instanceClass_label , "/") as ?instanceClass_label )
(STR(?instanceClass_label) as ?instanceClass_label)
(STR(?ds) as ?ds) 
where{
graph ?gRecord  {
?type a ?class.
optional{?type rdfs:label ?type_label . 
    FILTER(langmatches(lang(?type_label), "en") || langmatches(lang(?type_label), ""))
}
{?instanceURI crm:P2_has_type ?type} union {?type crm:P2i_is_type_of ?instanceURI}
}
values ?classE55 { <http://www.cidoc-crm.org/cidoc-crm/E55_Type> }
?class rdfs:subClassOf* ?classE55 .
optional{?class rdfs:label ?class_label . 
    FILTER(langmatches(lang(?class_label), "en") || langmatches(lang(?class_label), ""))
}
optional{ ?instanceURI a ?instanceClass.
    optional {?instanceClass rdfs:label ?instanceClass_label . 
        FILTER(langmatches(lang(?instanceClass_label), "en") || langmatches(lang(?instanceClass_label), ""))
    }
}
values ?ds { 'ARIADNE'^^<http://www.w3.org/2001/XMLSchema#string>}
GRAPH <dnet:graph> {?gRecord <dnet:collectedFrom> ?api . ?api <dnet:isApiOf> ?ds}
} 
group by ?ds ?class ?instanceClass ?type  ?class_label ?instanceClass_label ?type_label 
order by ?ds ?type

ERROR:root:EXCEPTION OCCURED WHEN EXECUTING QUERY: HTTP Error 504: Gateway Time-out
 Continue with execution of next query.
INFO:root:results_execution_duration: 7200.572084188461

INFO:root:harmonizing results
INFO:root:Done with harmonizing results, duration: 8.821487426757812e-06
INFO:root:EXECUTION FINISHED
Elapsed time: 7200.572084188461
INFO:root:Writing to summary
INFO:googleapiclient.discovery:URL being requested: PUT https://sheets.googleapis.com/v4/spreadsheets/1wGmI6VF5nQiy_bPxeZCoqgWhKHd92sxf09Pbjnb-F2w/values/0.%20Summary%21A47%3AA52?valueInputOption=RAW&alt=json
INFO:oauth2client.transport:Refreshing due to a 401 (attempt 1/2)
INFO:oauth2client.client:Refreshing access_token
INFO:root:Writing results to output_destination
INFO:googleapiclient.discovery:URL being requested: POST https://sheets.googleapis.com/v4/spreadsheets/1wGmI6VF5nQiy_bPxeZCoqgWhKHd92sxf09Pbjnb-F2w:batchUpdate?alt=json
INFO:googleapiclient.discovery:URL being requested: POST https://sheets.googleapis.com/v4/spreadsheets/1wGmI6VF5nQiy_bPxeZCoqgWhKHd92sxf09Pbjnb-F2w:batchUpdate?alt=json
INFO:googleapiclient.discovery:URL being requested: PUT https://sheets.googleapis.com/v4/spreadsheets/1wGmI6VF5nQiy_bPxeZCoqgWhKHd92sxf09Pbjnb-F2w/values/3.%20types_per_class_V1.3%21A1%3AA1?valueInputOption=RAW&alt=json
INFO:root:
################################
EXECUTE: 4. types_per_class_count.V1.1
#6 ############ Get Types related to Classes, per Datasource ###########
#Note: the class labels (i.e. ?class_label, ?instanceClass_label) could be replaced with the class names for better performance#
#DEFINE input:inference 'parthenos_rules'
select  
?type  
#(replace(str(?type),"(^.*/)",  "", "i" ) as ?type_label)
(STR(?type_label) as ?type_label)
?class
#(replace(str(?class),"(^.*/)",  "", "i" ) as ?class_label)
(STR(?class_label) as ?class_label)
?instanceClass
#(replace(str(?instanceClass),"(^.*/)",  "", "i" ) as ?instanceClass_label)
(STR(?instanceClass_label) as ?instanceClass_label)
(COUNT(distinct ?instanceURI) as ?instanceCount)
(STR(?ds) as ?ds)
where{
graph ?gRecord  {
?type a ?class.
optional {?type rdfs:label ?type_label .
    FILTER ( langmatches(lang(?type_label), "en") || langmatches(lang(?type_label), "") ) 
}
{?instanceURI crm:P2_has_type ?type} union {?type crm:P2i_is_type_of ?instanceURI}
}
values ?classE55 { <http://www.cidoc-crm.org/cidoc-crm/E55_Type> }
?class rdfs:subClassOf* ?classE55 .
optional{?class rdfs:label ?class_label . 
    FILTER(langmatches(lang(?class_label), "en") || langmatches(lang(?class_label), ""))
}
optional{ ?instanceURI a ?instanceClass.
    optional {?instanceClass rdfs:label ?instanceClass_label . 
        FILTER(langmatches(lang(?instanceClass_label), "en") || langmatches(lang(?instanceClass_label), ""))
    }
}
values ?ds { 'ARIADNE'^^<http://www.w3.org/2001/XMLSchema#string> }
GRAPH <dnet:graph> {?gRecord <dnet:collectedFrom> ?api . ?api <dnet:isApiOf> ?ds}
} 
group by ?ds ?class ?instanceClass ?type ?class_label ?instanceClass_label ?type_label
#group by ?ds ?class ?instanceClass ?type ?type_label
order by ?ds ?type
#---end of query ----

INFO:root:query_text: 
#6 ############ Get Types related to Classes, per Datasource ###########
#Note: the class labels (i.e. ?class_label, ?instanceClass_label) could be replaced with the class names for better performance#
#DEFINE input:inference 'parthenos_rules'
select  
?type  
#(replace(str(?type),"(^.*/)",  "", "i" ) as ?type_label)
(STR(?type_label) as ?type_label)
?class
#(replace(str(?class),"(^.*/)",  "", "i" ) as ?class_label)
(STR(?class_label) as ?class_label)
?instanceClass
#(replace(str(?instanceClass),"(^.*/)",  "", "i" ) as ?instanceClass_label)
(STR(?instanceClass_label) as ?instanceClass_label)
(COUNT(distinct ?instanceURI) as ?instanceCount)
(STR(?ds) as ?ds)
where{
graph ?gRecord  {
?type a ?class.
optional {?type rdfs:label ?type_label .
    FILTER ( langmatches(lang(?type_label), "en") || langmatches(lang(?type_label), "") ) 
}
{?instanceURI crm:P2_has_type ?type} union {?type crm:P2i_is_type_of ?instanceURI}
}
values ?classE55 { <http://www.cidoc-crm.org/cidoc-crm/E55_Type> }
?class rdfs:subClassOf* ?classE55 .
optional{?class rdfs:label ?class_label . 
    FILTER(langmatches(lang(?class_label), "en") || langmatches(lang(?class_label), ""))
}
optional{ ?instanceURI a ?instanceClass.
    optional {?instanceClass rdfs:label ?instanceClass_label . 
        FILTER(langmatches(lang(?instanceClass_label), "en") || langmatches(lang(?instanceClass_label), ""))
    }
}
values ?ds { 'ARIADNE'^^<http://www.w3.org/2001/XMLSchema#string> }
GRAPH <dnet:graph> {?gRecord <dnet:collectedFrom> ?api . ?api <dnet:isApiOf> ?ds}
} 
group by ?ds ?class ?instanceClass ?type ?class_label ?instanceClass_label ?type_label
#group by ?ds ?class ?instanceClass ?type ?type_label
order by ?ds ?type
#---end of query ----

ERROR:root:EXCEPTION OCCURED WHEN EXECUTING QUERY: HTTP Error 504: Gateway Time-out
 Continue with execution of next query.
INFO:root:results_execution_duration: 7200.457893848419

INFO:root:harmonizing results
INFO:root:Done with harmonizing results, duration: 7.152557373046875e-06
INFO:root:EXECUTION FINISHED
Elapsed time: 7200.457893848419
INFO:root:Writing to summary
INFO:googleapiclient.discovery:URL being requested: PUT https://sheets.googleapis.com/v4/spreadsheets/1wGmI6VF5nQiy_bPxeZCoqgWhKHd92sxf09Pbjnb-F2w/values/0.%20Summary%21A56%3AA61?valueInputOption=RAW&alt=json
INFO:oauth2client.transport:Refreshing due to a 401 (attempt 1/2)
INFO:oauth2client.client:Refreshing access_token
INFO:root:Writing results to output_destination
INFO:googleapiclient.discovery:URL being requested: POST https://sheets.googleapis.com/v4/spreadsheets/1wGmI6VF5nQiy_bPxeZCoqgWhKHd92sxf09Pbjnb-F2w:batchUpdate?alt=json
INFO:googleapiclient.discovery:URL being requested: POST https://sheets.googleapis.com/v4/spreadsheets/1wGmI6VF5nQiy_bPxeZCoqgWhKHd92sxf09Pbjnb-F2w:batchUpdate?alt=json
INFO:googleapiclient.discovery:URL being requested: PUT https://sheets.googleapis.com/v4/spreadsheets/1wGmI6VF5nQiy_bPxeZCoqgWhKHd92sxf09Pbjnb-F2w/values/4.%20types_per_class_count.V1.1%21A1%3AA1?valueInputOption=RAW&alt=json
INFO:root:
################################
EXECUTE: 5. all_types.V1.1
#5 ############ Discovering the redundant values of all the Types ###########
#DEFINE input:inference 'parthenos_rules'
select distinct (?instanceURI as ?type)
( STR(?label) as ?label)
( STR(?ds) as ?ds)
where{
values ?classE55 { <http://www.cidoc-crm.org/cidoc-crm/E55_Type> }
graph ?gRecord  {
?instanceURI a ?class.
optional{
?instanceURI rdfs:label ?label.
FILTER(langmatches(lang(?label), "en") || langmatches(lang(?label), ""))
}
}
?class rdfs:subClassOf* ?classE55.
values ?ds {'ARIADNE'^^<http://www.w3.org/2001/XMLSchema#string>}
GRAPH <dnet:graph> {?gRecord <dnet:collectedFrom> ?api . ?api <dnet:isApiOf> ?ds}
} 
order by  ?instanceURI
#---end of query ----

INFO:root:query_text: 
#5 ############ Discovering the redundant values of all the Types ###########
#DEFINE input:inference 'parthenos_rules'
select distinct (?instanceURI as ?type)
( STR(?label) as ?label)
( STR(?ds) as ?ds)
where{
values ?classE55 { <http://www.cidoc-crm.org/cidoc-crm/E55_Type> }
graph ?gRecord  {
?instanceURI a ?class.
optional{
?instanceURI rdfs:label ?label.
FILTER(langmatches(lang(?label), "en") || langmatches(lang(?label), ""))
}
}
?class rdfs:subClassOf* ?classE55.
values ?ds {'ARIADNE'^^<http://www.w3.org/2001/XMLSchema#string>}
GRAPH <dnet:graph> {?gRecord <dnet:collectedFrom> ?api . ?api <dnet:isApiOf> ?ds}
} 
order by  ?instanceURI
#---end of query ----

INFO:root:#### query_title: 5. all_types.V1.1

INFO:root:query_for_count: 
NONE

INFO:root:results_lines_count: -

INFO:root:results_execution_duration: 105.41459059715271

INFO:root:harmonizing results
INFO:root:Done with harmonizing results, duration: 0.7672245502471924
INFO:root:EXECUTION FINISHED
Elapsed time: 105.41459059715271
INFO:root:Writing to summary
INFO:googleapiclient.discovery:URL being requested: PUT https://sheets.googleapis.com/v4/spreadsheets/1wGmI6VF5nQiy_bPxeZCoqgWhKHd92sxf09Pbjnb-F2w/values/0.%20Summary%21A65%3AC82?valueInputOption=RAW&alt=json
INFO:root:Writing results to output_destination
INFO:googleapiclient.discovery:URL being requested: POST https://sheets.googleapis.com/v4/spreadsheets/1wGmI6VF5nQiy_bPxeZCoqgWhKHd92sxf09Pbjnb-F2w:batchUpdate?alt=json
INFO:googleapiclient.discovery:URL being requested: POST https://sheets.googleapis.com/v4/spreadsheets/1wGmI6VF5nQiy_bPxeZCoqgWhKHd92sxf09Pbjnb-F2w:batchUpdate?alt=json
INFO:googleapiclient.discovery:URL being requested: PUT https://sheets.googleapis.com/v4/spreadsheets/1wGmI6VF5nQiy_bPxeZCoqgWhKHd92sxf09Pbjnb-F2w/values/5.%20all_types.V1.1%21A1%3AC100001?valueInputOption=RAW&alt=json
INFO:root:
################################
EXECUTE: 6. place_instances_count.V1.1
#7b ############ Get the Places instances COUNT per Datasource ###########
select 
(?instanceURI as ?place)
#( GROUP_CONCAT(distinct ?place_labelX, "/") as ?place_label)
(STR(?place_label) as ?place_label)
(COUNT(distinct ?resource) as ?placeAppearance)
(STR(?ds) as ?ds) 
where{
values ?classE53 { <http://www.cidoc-crm.org/cidoc-crm/E53_Place> }
?class rdfs:subClassOf* ?classE53 .
graph ?gRecord {
?instanceURI a ?class.
optional{
?instanceURI rdfs:label ?place_label. FILTER(langmatches(lang(?place_label), "en") || langmatches(lang(?place_label), ""))
}
?resource ?relatedto ?instanceURI.
}
values ?ds { 'ARIADNE'^^<http://www.w3.org/2001/XMLSchema#string> }
GRAPH <dnet:graph> {?gRecord <dnet:collectedFrom> ?api . ?api <dnet:isApiOf> ?ds}
} group by ?ds ?instanceURI ?place_label
order by ?ds
#---end of query ----

INFO:root:query_text: 
#7b ############ Get the Places instances COUNT per Datasource ###########
select 
(?instanceURI as ?place)
#( GROUP_CONCAT(distinct ?place_labelX, "/") as ?place_label)
(STR(?place_label) as ?place_label)
(COUNT(distinct ?resource) as ?placeAppearance)
(STR(?ds) as ?ds) 
where{
values ?classE53 { <http://www.cidoc-crm.org/cidoc-crm/E53_Place> }
?class rdfs:subClassOf* ?classE53 .
graph ?gRecord {
?instanceURI a ?class.
optional{
?instanceURI rdfs:label ?place_label. FILTER(langmatches(lang(?place_label), "en") || langmatches(lang(?place_label), ""))
}
?resource ?relatedto ?instanceURI.
}
values ?ds { 'ARIADNE'^^<http://www.w3.org/2001/XMLSchema#string> }
GRAPH <dnet:graph> {?gRecord <dnet:collectedFrom> ?api . ?api <dnet:isApiOf> ?ds}
} group by ?ds ?instanceURI ?place_label
order by ?ds
#---end of query ----

INFO:root:#### query_title: 6. place_instances_count.V1.1

INFO:root:query_for_count: 
NONE

INFO:root:results_lines_count: -

INFO:root:results_execution_duration: 20.972266912460327

INFO:root:harmonizing results
INFO:root:Done with harmonizing results, duration: 0.5201737880706787
INFO:root:EXECUTION FINISHED
Elapsed time: 20.972266912460327
INFO:root:Writing to summary
INFO:googleapiclient.discovery:URL being requested: PUT https://sheets.googleapis.com/v4/spreadsheets/1wGmI6VF5nQiy_bPxeZCoqgWhKHd92sxf09Pbjnb-F2w/values/0.%20Summary%21A86%3AD103?valueInputOption=RAW&alt=json
INFO:root:Writing results to output_destination
INFO:googleapiclient.discovery:URL being requested: POST https://sheets.googleapis.com/v4/spreadsheets/1wGmI6VF5nQiy_bPxeZCoqgWhKHd92sxf09Pbjnb-F2w:batchUpdate?alt=json
INFO:googleapiclient.discovery:URL being requested: POST https://sheets.googleapis.com/v4/spreadsheets/1wGmI6VF5nQiy_bPxeZCoqgWhKHd92sxf09Pbjnb-F2w:batchUpdate?alt=json
INFO:googleapiclient.discovery:URL being requested: PUT https://sheets.googleapis.com/v4/spreadsheets/1wGmI6VF5nQiy_bPxeZCoqgWhKHd92sxf09Pbjnb-F2w/values/6.%20place_instances_count.V1.1%21A1%3AD58901?valueInputOption=RAW&alt=json
INFO:root:
################################
EXECUTE: 7. periods_and_events_count.V1.1
#8a ############ Get the Periods/Events/Activities instances COUNT per Datasource ###########
#DEFINE input:inference 'parthenos_rules'
select 
(?instanceURI as ?instance)
#( GROUP_CONCAT(distinct ?instance_label, "/") as ?instance_label)
(STR(?instance_label) as ?instance_label)
(COUNT(distinct ?resource) as ?instanceAppearance)
(STR(?ds) as ?ds) 
where{
graph ?gRecord {
?instanceURI a ?class.
optional{
?instanceURI rdfs:label ?instance_label.
FILTER(langmatches(lang(?instance_label), "en") || langmatches(lang(?instance_label), ""))
}
?resource ?relatedto ?instanceURI.
}
filter (?class = <http://www.cidoc-crm.org/cidoc-crm/E4_Period> || ?class = <http://www.cidoc-crm.org/cidoc-crm/E5_Event>)
#optional{?class rdfs:label ?class_label. FILTER(langmatches(lang(?class_label), "en") || langmatches(lang(?class_label), ""))}
values ?ds { 'ARIADNE'^^<http://www.w3.org/2001/XMLSchema#string> }
GRAPH <dnet:graph> {?gRecord <dnet:collectedFrom> ?api . ?api <dnet:isApiOf> ?ds}
} 
group by ?ds ?class ?instanceURI ?instance_label
order by ?ds ?class
#---end of query ----

INFO:root:query_text: 
#8a ############ Get the Periods/Events/Activities instances COUNT per Datasource ###########
#DEFINE input:inference 'parthenos_rules'
select 
(?instanceURI as ?instance)
#( GROUP_CONCAT(distinct ?instance_label, "/") as ?instance_label)
(STR(?instance_label) as ?instance_label)
(COUNT(distinct ?resource) as ?instanceAppearance)
(STR(?ds) as ?ds) 
where{
graph ?gRecord {
?instanceURI a ?class.
optional{
?instanceURI rdfs:label ?instance_label.
FILTER(langmatches(lang(?instance_label), "en") || langmatches(lang(?instance_label), ""))
}
?resource ?relatedto ?instanceURI.
}
filter (?class = <http://www.cidoc-crm.org/cidoc-crm/E4_Period> || ?class = <http://www.cidoc-crm.org/cidoc-crm/E5_Event>)
#optional{?class rdfs:label ?class_label. FILTER(langmatches(lang(?class_label), "en") || langmatches(lang(?class_label), ""))}
values ?ds { 'ARIADNE'^^<http://www.w3.org/2001/XMLSchema#string> }
GRAPH <dnet:graph> {?gRecord <dnet:collectedFrom> ?api . ?api <dnet:isApiOf> ?ds}
} 
group by ?ds ?class ?instanceURI ?instance_label
order by ?ds ?class
#---end of query ----

INFO:root:#### query_title: 7. periods_and_events_count.V1.1

INFO:root:query_for_count: 
NONE

INFO:root:results_lines_count: -

INFO:root:results_execution_duration: 3.7759573459625244

INFO:root:harmonizing results
INFO:root:Done with harmonizing results, duration: 0.008428335189819336
INFO:root:EXECUTION FINISHED
Elapsed time: 3.7759573459625244
INFO:root:Writing to summary
INFO:googleapiclient.discovery:URL being requested: PUT https://sheets.googleapis.com/v4/spreadsheets/1wGmI6VF5nQiy_bPxeZCoqgWhKHd92sxf09Pbjnb-F2w/values/0.%20Summary%21A107%3AD124?valueInputOption=RAW&alt=json
INFO:root:Writing results to output_destination
INFO:googleapiclient.discovery:URL being requested: POST https://sheets.googleapis.com/v4/spreadsheets/1wGmI6VF5nQiy_bPxeZCoqgWhKHd92sxf09Pbjnb-F2w:batchUpdate?alt=json
INFO:googleapiclient.discovery:URL being requested: POST https://sheets.googleapis.com/v4/spreadsheets/1wGmI6VF5nQiy_bPxeZCoqgWhKHd92sxf09Pbjnb-F2w:batchUpdate?alt=json
INFO:googleapiclient.discovery:URL being requested: PUT https://sheets.googleapis.com/v4/spreadsheets/1wGmI6VF5nQiy_bPxeZCoqgWhKHd92sxf09Pbjnb-F2w/values/7.%20periods_and_events_count.V1.1%21A1%3AD349?valueInputOption=RAW&alt=json
